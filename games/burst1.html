<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ナンバー・バースト</title>
    <meta name="google-adsense-account" content="ca-pub-3571574988222927">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3571574988222927" crossorigin="anonymous"></script>
    <link rel="icon" href="https://games.ad-hub.f5.si/image/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="https://games.ad-hub.f5.si/image/apple-touch-icon.png">
    <meta name="theme-color" content="#007bff">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { margin: 0; background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; touch-action: manipulation; }
        #ui { padding: 20px; text-align: center; }
        #timer { font-size: 2.5rem; font-weight: bold; color: #e74c3c; margin: 10px 0; }
        #next-num { font-size: 1.2rem; color: #3498db; font-weight: bold; }
        
        #grid { 
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; 
            width: 95vw; max-width: 400px; padding: 10px; background: #fff; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .num-btn { 
            aspect-ratio: 1; border: none; background: #3498db; color: white; 
            font-size: 1.5rem; font-weight: bold; border-radius: 8px; cursor: pointer;
            transition: 0.1s; display: flex; align-items: center; justify-content: center;
        }
        .num-btn:active { transform: scale(0.9); background: #2980b9; }
        .num-btn.pressed { background: #bdc3c7; color: #7f8c8d; cursor: default; transform: none; }

        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: flex; flex-direction: column; 
            align-items: center; justify-content: center; color: white; z-index: 100; display: none;
        }
        .btn-main { background: #2ecc71; color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 1.2rem; cursor: pointer; font-weight: bold; margin-top: 20px; }
        .back-link { margin-top: 20px; color: #ccc; text-decoration: none; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div id="ui">
        <div id="next-num">NEXT: 1</div>
        <div id="timer">0.00s</div>
    </div>

    <div id="grid"></div>

    <div id="overlay">
        <h1 id="result-title">FINISH!</h1>
        <p id="result-time" style="font-size: 2rem;"></p>
        <button class="btn-main" onclick="startGame()">もう一度挑戦</button>
        <a href="/" class="back-link">← ゲーム一覧に戻る</a>
    </div>

<script>
    const grid = document.getElementById('grid');
    const timerDisp = document.getElementById('timer');
    const nextDisp = document.getElementById('next-num');
    const overlay = document.getElementById('overlay');

    let currentNum = 1;
    let startTime;
    let timerInterval;
    let isPlaying = false;

    function initGrid() {
        grid.innerHTML = '';
        const nums = Array.from({length: 25}, (_, i) => i + 1);
        nums.sort(() => Math.random() - 0.5); // シャッフル

        nums.forEach(n => {
            const btn = document.createElement('button');
            btn.className = 'num-btn';
            btn.innerText = n;
            btn.onclick = () => handleTap(n, btn);
            grid.appendChild(btn);
        });
    }

    function startGame() {
        overlay.style.display = 'none';
        currentNum = 1;
        isPlaying = false;
        nextDisp.innerText = `NEXT: ${currentNum}`;
        timerDisp.innerText = "0.00s";
        initGrid();
    }

    function handleTap(n, btn) {
        if (n !== currentNum) return;
        
        if (currentNum === 1) {
            startTime = Date.now();
            isPlaying = true;
            startTimer();
        }

        btn.classList.add('pressed');
        btn.disabled = true;
        currentNum++;

        if (currentNum > 25) {
            finishGame();
        } else {
            nextDisp.innerText = `NEXT: ${currentNum}`;
        }
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            const now = Date.now();
            const diff = (now - startTime) / 1000;
            timerDisp.innerText = diff.toFixed(2) + "s";
        }, 10);
    }

    function finishGame() {
        isPlaying = false;
        clearInterval(timerInterval);
        const finalTime = timerDisp.innerText;
        overlay.style.display = 'flex';
        document.getElementById('result-time').innerText = finalTime;
    }

    startGame();
</script>
</body>
</html>
