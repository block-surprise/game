<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>çˆ†é€Ÿï¼ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ»ã‚·ãƒ§ãƒƒãƒ—</title>
    <style>
        body { margin: 0; background: #f8e9a1; font-family: 'Arial Rounded MT Bold', sans-serif; display: flex; flex-direction: column; align-items: center; overflow: hidden; touch-action: none; }
        #game-info { font-size: 1.2rem; color: #37474f; margin: 10px; font-weight: bold; }
        #order-display { background: #fff; padding: 15px; border-radius: 10px; border: 4px solid #37474f; min-width: 200px; text-align: center; margin-bottom: 20px; }
        .ingredient-icon { font-size: 2rem; margin: 0 5px; }
        
        #plate { width: 250px; height: 150px; border-bottom: 8px solid #ddd; position: relative; display: flex; flex-direction: column-reverse; align-items: center; margin-bottom: 40px; }
        .bun-bottom { width: 120px; height: 30px; background: #e67e22; border-radius: 0 0 15px 15px; }
        .bun-top { width: 120px; height: 40px; background: #e67e22; border-radius: 40px 40px 10px 10px; }
        .patty { width: 110px; height: 20px; background: #5d4037; border-radius: 5px; }
        .cheese { width: 115px; height: 10px; background: #f1c40f; border-radius: 2px; }
        .lettuce { width: 115px; height: 12px; background: #2ecc71; border-radius: 5px; }

        #controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .btn-ing { width: 80px; height: 80px; border-radius: 15px; border: none; background: #fff; font-size: 2rem; cursor: pointer; box-shadow: 0 4px #ccc; active { transform: translateY(4px); box-shadow: none; } }
        
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; flex-direction: column; align-items: center; justify-content: center; color: white; z-index: 100; }
        .btn-link { background: #e67e22; color: white; border: none; padding: 15px 30px; border-radius: 30px; font-size: 1.2rem; cursor: pointer; margin-top: 15px; text-decoration: none; }
    </style>
</head>
<body>

    <div id="game-info">ğŸ” çµ¦æ–™: Â¥<span id="salary">0</span> | æ®‹ã‚Š: <span id="timer">30</span>ç§’</div>
    
    <div id="order-display">
        <div style="font-size: 0.8rem; color: #888;">æ³¨æ–‡:</div>
        <div id="order-list"></div>
    </div>

    <div id="plate">
        <div class="bun-bottom"></div>
        <div id="stack"></div>
    </div>

    <div id="controls">
        <button class="btn-ing" onclick="addIngredient('patty')">ğŸ–</button>
        <button class="btn-ing" onclick="addIngredient('cheese')">ğŸ§€</button>
        <button class="btn-ing" onclick="addIngredient('lettuce')">ğŸ¥¬</button>
    </div>

    <div id="overlay">
        <h1>ãƒã‚¤ãƒˆçµ‚äº†ï¼</h1>
        <p>æœ¬æ—¥ã®ç¨¼ã: Â¥<span id="final-salary">0</span></p>
        <button class="btn-link" onclick="location.reload()">æ¬¡ã®ã‚·ãƒ•ãƒˆã¸</button>
        <a href="/" class="btn-link" style="background: #444;">åº—ã‚’å»ã‚‹</a>
    </div>

<script>
    const ingredients = { patty: 'ğŸ–', cheese: 'ğŸ§€', lettuce: 'ğŸ¥¬' };
    let currentOrder = [];
    let currentStack = [];
    let salary = 0;
    let timeLeft = 30;

    function createOrder() {
        const len = Math.floor(Math.random() * 3) + 2;
        currentOrder = [];
        const orderList = document.getElementById('order-list');
        orderList.innerHTML = '';
        for(let i=0; i<len; i++) {
            const key = Object.keys(ingredients)[Math.floor(Math.random()*3)];
            currentOrder.push(key);
            orderList.innerHTML += `<span class="ingredient-icon">${ingredients[key]}</span>`;
        }
    }

    function addIngredient(type) {
        if(timeLeft <= 0) return;
        currentStack.push(type);
        const div = document.createElement('div');
        div.className = type;
        document.getElementById('stack').appendChild(div);

        // æ­£è§£ãƒã‚§ãƒƒã‚¯
        if(currentStack[currentStack.length-1] !== currentOrder[currentStack.length-1]) {
            resetBurger(false); // æ³¨æ–‡é–“é•ã„
            return;
        }

        if(currentStack.length === currentOrder.length) {
            salary += currentOrder.length * 100;
            document.getElementById('salary').innerText = salary;
            setTimeout(() => resetBurger(true), 100);
        }
    }

    function resetBurger(success) {
        document.getElementById('stack').innerHTML = '';
        currentStack = [];
        createOrder();
    }

    const gameTimer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = timeLeft;
        if(timeLeft <= 0) {
            clearInterval(gameTimer);
            document.getElementById('final-salary').innerText = salary;
            document.getElementById('overlay').style.display = 'flex';
        }
    }, 1000);

    createOrder();
</script>
</body>
</html>
